buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'de.undercouch:gradle-download-task:1.0'
    }
}
import de.undercouch.gradle.tasks.download.Download


apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'download-task'


mainClassName = "weka.core.SystemInfo"


urlKdd99WebSite = 'http://kdd.ics.uci.edu/databases/kddcup99/'

kddDataSetFiles = [
'kddcup.names',
'kddcup.data.gz',
'kddcup.data_10_percent.gz',
'kddcup.newtestdata_10_percent_unlabeled.gz',
'kddcup.testdata.unlabeled.gz',
'kddcup.testdata.unlabeled_10_percent.gz',
'corrected.gz',
'training_attack_types',
'typo-correction.txt',
'task.html'

]



// Examples 
// gradle -PmainClass=Program execute
// gradle -PmainClass=weka.core.SystemInfo execute
// Bu hali ile aşağıdaki hatayı  veriyor.
// Could not find property 'mainClass' on task ':execute'.
// Buna başka bir çözüm bulacağım
//task execute(type:JavaExec) {
//   main = mainClass
//   classpath = sourceSets.main.runtimeClasspath
//}




version = '0.0.1'


repositories {
    mavenCentral()
}

dependencies {

	runtime 'nz.ac.waikato.cms.weka:weka-dev:3.7.11'
}



task(createChecksumForKddDatasetFiles) << {
     println "createChecksumForKddDatasetFiles"
     for(filename in kddDataSetFiles)
     {
         println filename
         fullFileName='Datasets/' + filename
         ant.checksum(file:fullFileName,todir:'Datasets')

     }
}


task downloadKddDatasetFiles(type: Download) {
    src([
        'http://kdd.ics.uci.edu/databases/kddcup99/kddcup.names',
        'http://kdd.ics.uci.edu/databases/kddcup99/kddcup.data.gz',
        'http://kdd.ics.uci.edu/databases/kddcup99/kddcup.data_10_percent.gz',
        'http://kdd.ics.uci.edu/databases/kddcup99/kddcup.newtestdata_10_percent_unlabeled.gz',
        'http://kdd.ics.uci.edu/databases/kddcup99/kddcup.testdata.unlabeled.gz',
        'http://kdd.ics.uci.edu/databases/kddcup99/kddcup.testdata.unlabeled_10_percent.gz',
        'http://kdd.ics.uci.edu/databases/kddcup99/corrected.gz',
        'http://kdd.ics.uci.edu/databases/kddcup99/training_attack_types',
        'http://kdd.ics.uci.edu/databases/kddcup99/typo-correction.txt',
        'http://kdd.ics.uci.edu/databases/kddcup99/task.html'

    ])
    dest 'Datasets'
}



task(unzipKddDatasetFiles) << {
     println "unzipKddDatasetFiles"
     ant.gunzip(dest:'Datasets/corrected',src:'Datasets/corrected.gz')
     
}




jar {
    manifest.attributes(
            'Class-Path': configurations.runtime.files.collect { it.name }.join(' ')
    )
}
